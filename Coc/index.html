<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CoC Builder Tracker</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #121212;
    color: #f2f2f2;
    padding: 2rem;
    max-width: 700px;
    margin: auto;
  }
  h1 { text-align: center; color: #ff5264; }
  .builder {
    background: #222;
    border-radius: 1rem;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 0 8px rgba(0,0,0,0.5);
  }
  label { display: block; margin: .3rem 0; }
  input {
    width: 100%;
    padding: .4rem;
    margin-bottom: .5rem;
    border: none;
    border-radius: .5rem;
  }
  button {
    background: #cd3244;
    color: white;
    border: none;
    padding: .6rem 1rem;
    border-radius: .5rem;
    cursor: pointer;
    transition: background 0.2s;
  }
  button:hover { background: #991c2c; }
  #potions {
    margin: 1rem 0;
    text-align: center;
  }
</style>
</head>
<body>
<h1>Clash of Clans Builder Tracker</h1>

<div id="builders"></div>

<div id="potions">
  <label>Builder Potions Active:</label>
  <input type="number" id="potionCount" min="0" max="10" value="0">
  <button onclick="applyPotion()">Apply Potion Effect</button>
</div>

<script>
const builderCount = 6;
const potionBoost = 10; // hours reduced per builder potion
const storageKey = "builderTrackerData";

function loadBuilders() {
  const data = JSON.parse(localStorage.getItem(storageKey)) || [];
  const container = document.getElementById("builders");
  container.innerHTML = "";
  for (let i = 0; i < builderCount; i++) {
    const b = data[i] || { name: "", hours: "" };
    const div = document.createElement("div");
    div.className = "builder";
    div.innerHTML = `
      <h3>Builder ${i + 1}</h3>
      <label>Project Name:</label>
      <input type="text" id="name${i}" value="${b.name}">
      <label>Remaining Time (hours):</label>
      <input type="number" id="hours${i}" value="${b.hours}" min="0">
      <button onclick="saveBuilder(${i})">Save</button>
    `;
    container.appendChild(div);
  }
}

function saveBuilder(i) {
  const name = document.getElementById(`name${i}`).value;
  const hours = parseFloat(document.getElementById(`hours${i}`).value) || 0;
  const data = JSON.parse(localStorage.getItem(storageKey)) || [];
  data[i] = { name, hours };
  localStorage.setItem(storageKey, JSON.stringify(data));
  alert(`Builder ${i + 1} saved!`);
}

function applyPotion() {
  const m = parseFloat(document.getElementById("potionCount").value) || 0;
  if (m <= 0) return alert("No potions applied.");

  const data = JSON.parse(localStorage.getItem(storageKey)) || [];
  for (let i = 0; i < data.length; i++) {
    if (!data[i]) continue;
    const R = parseFloat(data[i].hours) || 0;
    const Rnew = Math.max(R - (potionBoost * m), 0);
    data[i].hours = Rnew.toFixed(2);
  }
  localStorage.setItem(storageKey, JSON.stringify(data));
  loadBuilders();
  alert(`${m} Builder Potion(s) applied! Each builder reduced by ${potionBoost * m} hours.`);
}

window.onload = loadBuilders;
</script>
</body>
</html>
